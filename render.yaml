# Render.com deployment configuration for Ghost
# See https://render.com/docs/blueprint-spec for documentation
#
# This configuration uses the official Ghost Docker image for simplicity
# and reliability. It uses SQLite for the database which is stored on
# a persistent disk.

services:
  - type: web
    name: ghost
    runtime: docker
    plan: starter
    region: oregon
    dockerfilePath: ./Dockerfile
    dockerContext: .
    envVars:
      # Ghost URL - REQUIRED: Set this to your Render URL (e.g., https://ghost-xxxx.onrender.com)
      # or your custom domain
      - key: url
        sync: false

      # Database configuration - using SQLite for simplicity
      - key: database__client
        value: sqlite3
      - key: database__connection__filename
        value: /var/lib/ghost/content/data/ghost.db

      # Mail configuration (configure these in Render dashboard)
      # Ghost supports various mail providers: SMTP, Mailgun, SendGrid, etc.
      - key: mail__transport
        value: SMTP
      - key: mail__options__host
        sync: false
      - key: mail__options__port
        sync: false
      - key: mail__options__secure
        sync: false
      - key: mail__options__auth__user
        sync: false
      - key: mail__options__auth__pass
        sync: false

      # Optional: Stripe integration for memberships/subscriptions
      - key: stripe__secretKey
        sync: false
      - key: stripe__publicKey
        sync: false

    # Persistent disk for Ghost content (images, themes, uploads, SQLite database)
    disk:
      name: ghost-content
      mountPath: /var/lib/ghost/content
      sizeGB: 10

    # Health check endpoint
    healthCheckPath: /ghost/api/admin/site/
